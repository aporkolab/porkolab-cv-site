<!DOCTYPE html>
<html lang="{{ page.lang | default: 'en' }}">
  <head>
    <meta charset="utf-8" />
    <title>{{ page.title }} | {{ site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&family=Syncopate:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        mermaid.initialize({
          startOnLoad: false,
          theme: 'base',
          // Kikapcsoljuk a max-width k√©nyszer√≠t√©st JS oldalon is
          flowchart: {useMaxWidth: false, htmlLabels: true},
          sequence: {useMaxWidth: false},
          themeVariables: {
            primaryColor: '#7000ff',
            primaryTextColor: '#fff',
            primaryBorderColor: '#7000ff',
            lineColor: '#00f3ff',
            secondaryColor: '#0a0a0c',
            tertiaryColor: '#0a0a0c',
            mainBkg: '#0a0a0c',
            nodeBorder: '#7000ff',
            clusterBkg: 'rgba(255,255,255,0.05)',
            clusterBorder: '#333',
            defaultLinkColor: '#00f3ff',
            fontFamily: 'JetBrains Mono',
          },
          securityLevel: 'loose',
        });
      });
    </script>

    <style>
      /* --- SKILL BOXES --- */
      .skill-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: 1rem;
      }
      .skill-box {
        border: 1px solid var(--border);
        padding: 1rem;
        text-align: center;
        font-size: 0.85rem;
        font-weight: 500;
        transition: 0.3s;
        cursor: default;
        background: linear-gradient(
          45deg,
          transparent 50%,
          rgba(112, 0, 255, 0.05) 100%
        );
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 80px;
        word-wrap: break-word;
        hyphens: auto;
        line-height: 1.3;
      }
      .skill-box:hover {
        border-color: #fff;
        background: #fff;
        color: #000;
      }

      .dl-btn {
        display: block;
        width: 100%;
        padding: 1.5rem;
        background: #fff;
        color: #000;
        font-family: 'Syncopate', sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        text-align: center;
        border: none;
        cursor: pointer;
        transition: 0.4s;
        margin-top: 2rem;
        position: relative;
        overflow: hidden;
      }
      .dl-btn:hover {
        background: var(--accent);
        color: #fff;
        letter-spacing: 2px;
      }
      .dl-btn::after {
        content: ' [PDF]';
        opacity: 0.5;
        font-size: 0.8em;
      }

      .interest-item {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
      }

      .interest-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }
      .interest-item h3 {
        font-family: 'Space Grotesk';
        font-size: 1rem;
        color: #fff;
        margin: 0 0 0.5rem 0;
        text-transform: uppercase;
      }
      .interest-item p {
        font-size: 0.9rem;
        color: #888;
        margin: 0;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
        100% {
          opacity: 1;
        }
      }

      @media (max-width: 900px) {
        .layout-wrapper {
          flex-direction: column;
        }
        .identity-panel {
          width: 100%;
          height: auto;
          padding: 3rem 1.5rem;
          border-right: none;
          border-bottom: 1px solid var(--border);
        }
        .data-panel {
          width: 100%;
          height: auto;
          padding: 2rem 1.5rem;
        }
        h1 {
          font-size: 2.2rem;
        }
        .lang-switch {
          top: 1rem;
          right: 1rem;
          padding: 0.5rem;
          gap: 0.5rem;
        }
        .lang-btn {
          font-size: 1.2rem;
        }
        .skill-grid {
          grid-template-columns: 1fr 1fr;
        }
        .interest-grid {
          grid-template-columns: 1fr;
        }
      }
      /* --- GLOBAL STYLES --- */

      :root {
        --bg: #030304;
        --surface: #0a0a0c;
        --surface-glass: rgba(15, 15, 20, 0.85);
        --fg: #f0f0f0;
        --dim: #888899;

        --accent: #7000ff;
        --accent-glow: rgba(112, 0, 255, 0.4);
        --secondary: #00f3ff;

        --border: rgba(255, 255, 255, 0.08);
        --radius: 16px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: var(--bg);
        color: var(--fg);
        font-family: 'Outfit', sans-serif;
        font-size: 16px;
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* --- BACKGROUND --- */
      .noise-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        opacity: 0.03;
        background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIj48ZmlsdGVyIGlkPSJub2lzZSI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuNjUiIG51bU9jdGF2ZXM9IjMiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWx0ZXI9InVybCgjbm9pc2UpIiBvcGFjaXR5PSIxIi8+PC9zdmc+');
      }
      .bg-orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(120px);
        z-index: -2;
        opacity: 0.25;
      }
      .orb-1 {
        top: -20%;
        left: -20%;
        width: 70vw;
        height: 70vw;
        background: var(--accent);
      }
      .orb-2 {
        bottom: -20%;
        right: -20%;
        width: 60vw;
        height: 60vw;
        background: var(--secondary);
      }

      .layout-wrapper {
        display: grid;
        grid-template-columns: 420px 1fr;
        max-width: 1440px;
        margin: 0 auto;
        gap: 4rem;
        padding: 2rem;
        min-height: 100vh;
      }

      /* --- SIDEBAR --- */
      .identity-panel {
        position: sticky;
        top: 2rem;
        height: calc(100vh - 4rem);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 2.5rem;
        background: var(--surface-glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        overflow-y: auto;
      }

      .data-panel {
        padding-top: 1rem;
        padding-bottom: 4rem;
      }

      /* --- TYPOGRAPHY --- */
      h1 {
        font-family: 'Outfit', sans-serif;
        font-weight: 800;
        font-size: 3rem;
        line-height: 1;
        margin: 0 0 1rem 0;
        text-transform: uppercase;
        letter-spacing: -1px;
        color: #fff;
      }
      .role-title {
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        color: var(--secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 1rem;
      }
      h2 {
        font-size: 1.2rem;
        color: var(--dim);
        text-transform: uppercase;
        letter-spacing: 3px;
        margin: 5rem 0 2rem 0;
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      h2::after {
        content: '';
        flex: 1;
        height: 1px;
        background: rgba(255, 255, 255, 0.1);
      }
      h2 span.index {
        font-family: 'JetBrains Mono';
        color: var(--accent);
        font-weight: bold;
      }

      /* --- PROJECT CARDS --- */
      .project-grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
      }
      .project-card {
        position: relative;
        background: var(--surface-glass);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 2rem;
        display: flex;
        flex-direction: column;
        transition: 0.3s;
        min-height: 350px; /* Magass√°g igaz√≠tva */
        border-top: 3px solid transparent;
      }
      .project-card:hover {
        border-color: var(--accent);
        border-top-color: var(--secondary);
        transform: translateY(-5px);
      }

      .card-content {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      /* Project Links (Compatible with new YAML) */
      .prj-actions {
        display: flex;
        gap: 10px;
        margin-bottom: 1rem;
      }
      .prj-link {
        font-family: 'JetBrains Mono';
        font-size: 0.75rem;
        color: var(--fg);
        text-decoration: none;
        padding: 4px 10px;
        border: 1px solid var(--border);
        border-radius: 6px;
        transition: 0.2s;
        display: flex;
        align-items: center;
        gap: 6px;
        background: rgba(255, 255, 255, 0.02);
      }
      .prj-link:hover {
        border-color: var(--secondary);
        color: #fff;
        background: rgba(0, 243, 255, 0.1);
      }
      .prj-link svg {
        width: 12px;
        height: 12px;
        fill: currentColor;
      }

      /* --- ARCHITECTURE MODAL --- */
      .arch-btn {
        margin-top: 1.5rem;
        width: 100%;
        padding: 0.8rem;
        background: rgba(112, 0, 255, 0.1);
        border: 1px solid var(--accent);
        color: #fff;
        font-family: 'Syncopate', sans-serif;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }
      .arch-btn:hover {
        background: var(--accent);
        box-shadow: 0 0 20px var(--accent-glow);
      }

      /* --- GLOBAL MODAL (JAV√çTOTT) --- */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(10px);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
      }
      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        width: 95vw;
        max-width: 1200px;
        height: 90vh; /* Nagyobb ablak */
        background: #0a0a0c;
        border: 1px solid var(--secondary);
        border-radius: var(--radius);
        padding: 0;
        display: flex;
        flex-direction: column;
        transform: scale(0.95);
        transition: 0.3s;
        overflow: hidden;
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
      }
      .modal-overlay.active .modal-content {
        transform: scale(1);
      }

      .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(255, 255, 255, 0.02);
      }
      .modal-title {
        font-family: 'Syncopate';
        color: var(--secondary);
        font-size: 1rem;
        letter-spacing: 2px;
      }
      .modal-close {
        background: none;
        border: none;
        color: var(--fg);
        font-size: 1.5rem;
        cursor: pointer;
        transition: 0.2s;
      }
      .modal-close:hover {
        color: #fff;
        transform: rotate(90deg);
      }
      .mermaid-container {
        flex: 1;
        width: 100%;
        height: 100%;
        overflow: auto; /* G√∂rget√©s enged√©lyez√©se */
        padding: 2rem;
        display: block; /* Grid/Flex helyett block, hogy a scroll m≈±k√∂dj√∂n */
        display: grid;
        place-items: center;
      }

      /* SVG JAV√çT√ÅS: Ne menjen √∂ssze! */
      .mermaid-container svg {
        max-width: none !important; /* Tilos √∂sszenyomni */
        height: auto !important;
        width: auto !important; /* Eredeti m√©ret */
        min-width: 100%; /* De legal√°bb t√∂ltse ki a k√©perny≈ët */
      }

      /* --- DOWNLOAD BUTTON --- */
      .dl-btn {
        display: block;
        width: 100%;
        padding: 1.2rem;
        margin-top: auto;
        background: var(--fg);
        color: var(--bg);
        font-weight: 800;
        text-transform: uppercase;
        text-align: center;
        border-radius: 12px;
        transition: 0.3s;
        cursor: pointer;
      }
      .dl-btn:hover {
        background: var(--accent);
        color: #fff;
      }

      /* --- SOCIAL LINKS --- */
      .social-stack {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
        margin-bottom: 2rem;
      }
      .social-link {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--fg);
        text-decoration: none;
        transition: 0.2s;
        font-size: 0.9rem;
        background: rgba(255, 255, 255, 0.02);
      }
      .social-link:hover {
        border-color: var(--accent);
        background: rgba(255, 255, 255, 0.05);
        transform: translateX(5px);
      }

      /* --- SKILL CHIPS & XP --- */
      .skill-chip {
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid var(--border);
        border-radius: 100px;
        font-size: 0.85rem;
        color: #ddd;
        display: inline-block;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .xp-item {
        padding-left: 2rem;
        border-left: 2px solid var(--border);
        margin-bottom: 3rem;
        position: relative;
      }
      .xp-dot {
        position: absolute;
        left: -5px;
        top: 5px;
        width: 8px;
        height: 8px;
        background: var(--bg);
        border: 2px solid var(--dim);
        border-radius: 50%;
      }

      @media (max-width: 1000px) {
        .layout-wrapper {
          grid-template-columns: 1fr;
          padding: 1.5rem;
          gap: 2rem;
        }
        .identity-panel {
          position: relative;
          height: auto;
          top: 0;
          overflow: visible;
          padding: 2rem;
        }
        h1 {
          font-size: 2.5rem;
        }
        .lang-switch {
          top: 1rem;
          right: 1rem;
        }
      }
      @media (max-width: 600px) {
        .skill-grid {
          grid-template-columns: 1fr;
        }

        .project-grid-container {
          grid-template-columns: 1fr;
        }

        .data-panel {
          padding-left: 1rem;
          padding-right: 1rem;
        }

        h1 {
          font-size: 2rem;
        }
      }
      @media (max-width: 900px) {
        .project-card {
          min-height: 280px;
        }
      }
    </style>
  </head>
  <body>
    <div class="noise-overlay"></div>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <div
      style="
        position: fixed;
        top: 1.5rem;
        right: 2rem;
        z-index: 999;
        background: rgba(0, 0, 0, 0.6);
        padding: 6px 12px;
        border-radius: 50px;
        border: 1px solid var(--border);
        backdrop-filter: blur(10px);
        display: flex;
        gap: 10px;
      "
    >
      <a
        href="/"
        style="
          text-decoration: none;
          filter: grayscale(1);
          opacity: 0.7;
          transition: 0.3s;
        "
        onmouseover="this.style.filter='none';this.style.opacity='1'"
        onmouseout="this.style.filter='grayscale(1)';this.style.opacity='0.7'"
        >üá¨üáß</a
      >
      <a
        href="/hu/"
        style="
          text-decoration: none;
          filter: grayscale(1);
          opacity: 0.7;
          transition: 0.3s;
        "
        onmouseover="this.style.filter='none';this.style.opacity='1'"
        onmouseout="this.style.filter='grayscale(1)';this.style.opacity='0.7'"
        >üá≠üá∫</a
      >
      <a
        href="/de/"
        style="
          text-decoration: none;
          filter: grayscale(1);
          opacity: 0.7;
          transition: 0.3s;
        "
        onmouseover="this.style.filter='none';this.style.opacity='1'"
        onmouseout="this.style.filter='grayscale(1)';this.style.opacity='0.7'"
        >üá©üá™</a
      >
    </div>

    {% assign cv = site.data.cv_data %} {% assign lang = page.lang | default:
    "en" %} {% if lang == 'hu' %} {% assign t_skills = "K√©szs√©gek" %} {% assign
    t_exp = "Tapasztalat" %} {% assign t_edu = "Tanulm√°nyok" %} {% assign t_pubs
    = "Publik√°ci√≥k" %} {% assign t_awards = "D√≠jak" %} {% assign t_lang =
    "Nyelvek" %} {% assign t_int = "√ârdekl≈ëd√©s" %} {% assign t_dl = "√ñn√©letrajz
    Let√∂lt√©se" %} {% assign t_req = "Hozz√°f√©r√©s K√©r√©se" %} {% elsif lang == 'de'
    %} {% assign t_skills = "F√§higkeiten" %} {% assign t_exp = "Erfahrung" %} {%
    assign t_edu = "Ausbildung" %} {% assign t_pubs = "Publikationen" %} {%
    assign t_awards = "Auszeichnungen" %} {% assign t_lang = "Sprachen" %} {%
    assign t_int = "Interessen" %} {% assign t_dl = "Lebenslauf Herunterladen"
    %} {% assign t_req = "Zugriff Anfordern" %} {% else %} {% assign t_skills =
    "Skills" %} {% assign t_exp = "Experience" %} {% assign t_edu = "Education"
    %} {% assign t_pubs = "Publications" %} {% assign t_awards = "Awards" %} {%
    assign t_lang = "Languages" %} {% assign t_int = "Interests" %} {% assign
    t_dl = "Download CV" %} {% assign t_req = "Request Access" %} {% assign
    t_projects = "Engineering Portfolio" %} {% assign t_view_arch = "View
    Blueprint" %} {% endif %}

    <div id="archModal" class="modal-overlay" onclick="closeModal(event)">
      <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
          <div class="modal-title" style="color: var(--secondary)">
            SYSTEM ARCHITECTURE
          </div>
          <button class="modal-close" onclick="closeModal()">‚úï</button>
        </div>
        <div id="mermaidTarget" class="mermaid-container"></div>
      </div>
    </div>

    <div class="layout-wrapper">
      <aside class="identity-panel">
        <div style="flex: 1">
          <div class="role-title">{{ cv.title[lang] }}</div>
          <h1>{{ cv.name[lang] }}</h1>
          <p style="color: var(--dim); margin-top: 1.5rem; line-height: 1.6">
            {{ cv.summary[lang] }}
          </p>
        </div>

        <div style="margin-top: 3rem">
          <div class="social-stack">
            {% if cv.contact.github %}
            <a
              href="{{ cv.contact.github }}"
              class="social-link"
              target="_blank"
            >
              GitHub / Code <span>‚Üí</span>
            </a>
            {% endif %} {% if cv.contact.linkedin %}
            <a
              href="{{ cv.contact.linkedin }}"
              class="social-link"
              target="_blank"
            >
              LinkedIn <span>‚Üí</span>
            </a>
            {% endif %} {% if cv.contact.medium %}
            <a
              href="{{ cv.contact.medium }}"
              class="social-link"
              target="_blank"
            >
              Medium blog <span>‚Üí</span>
            </a>
            {% endif %} {% if cv.contact.bento %}
            <a
              href="{{ cv.contact.bento }}"
              class="social-link"
              target="_blank"
            >
              Bento (all links one space) <span>‚Üí</span>
            </a>
            {% endif %} {% if cv.contact.authorWebsite %}
            <a
              href="{{ cv.contact.authorWebsite }}"
              class="social-link"
              target="_blank"
            >
              Writer Site <span>‚Üí</span>
            </a>
            {% endif %}
          </div>
          <!-- social-stack -->
        </div>
        <!-- margin-top wrapper -->
        <div>
          {% assign pdf_url = cv.downloads[lang] %} {% unless pdf_url %} {%
          assign pdf_url = cv.downloads['en'] %} {% endunless %} {% if pdf_url
          %}
          <a href="{{ pdf_url }}" class="dl-btn" target="_blank">{{ t_dl }}</a>
          <div
            style="
              margin-top: 10px;
              font-size: 0.7rem;
              color: var(--dim);
              text-align: center;
              font-family: 'JetBrains Mono';
            "
          >
            SECURE LINK ‚Ä¢ {{ lang | upcase }}
          </div>
          {% else %}
          <a
            href="mailto:{{ cv.contact.email }}"
            class="dl-btn"
            style="opacity: 0.7"
            >{{ t_req }}</a
          >
          {% endif %}
        </div>
      </aside>

      <main class="data-panel">
        <section>
          <h2>Experience <span class="index">XP</span></h2>
          {% for exp in cv.experience %}
          <div class="xp-item">
            <div class="xp-dot"></div>
            <h3 style="color: #fff; margin-bottom: 0.2rem; font-size: 1.3rem">
              {{ exp.role[lang] }}
            </h3>
            <div
              style="
                color: var(--secondary);
                font-family: 'JetBrains Mono';
                font-size: 0.9rem;
                margin-bottom: 1rem;
              "
            >
              {{ exp.company }} ‚Ä¢ {{ exp.period }}
            </div>
            <ul style="list-style: none; color: var(--dim)">
              {% for item in exp.details[lang] %}
              <li
                style="
                  margin-bottom: 0.5rem;
                  padding-left: 1rem;
                  position: relative;
                "
              >
                <span style="position: absolute; left: 0; color: var(--accent)"
                  >‚Ä∫</span
                >
                {{ item }}
              </li>
              {% endfor %}
            </ul>
          </div>
          {% endfor %}
        </section>

        <section>
          <h2>Skills <span class="index">TK</span></h2>
          {% for category in cv.skills %}
          <div style="margin-bottom: 2rem">
            <div
              style="
                text-transform: uppercase;
                color: var(--dim);
                font-size: 0.8rem;
                margin-bottom: 0.8rem;
                letter-spacing: 1px;
              "
            >
              {{ category[0] | replace: "_", " " }}
            </div>
            <div style="display: flex; flex-wrap: wrap; gap: 0.6rem">
              {% for s in category[1] %}
              <div class="skill-chip">{{ s[lang] }}</div>
              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </section>

        {% assign projects = site.data.projects.projects %} {% if projects %}
        <section>
          <h2 style="margin-top: 0">
            {{ t_projects }}
            <span class="index" style="font-size: 0.8rem; margin-left: auto"
              >{{ projects.size }} UNITS</span
            >
          </h2>

          <div class="project-grid-container">
            {% for project in projects %}
            <div class="project-card">
              <div class="card-content">
                <h3
                  style="color: #fff; margin-bottom: 0.5rem; font-size: 1.2rem"
                >
                  {{ project.name }}
                </h3>

                <div class="prj-actions">
                  {% if project.links.repo %}
                  <a
                    href="{{ project.links.repo }}"
                    target="_blank"
                    class="prj-link"
                  >
                    <svg viewBox="0 0 24 24">
                      <path
                        d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405 1.02 0 2.04.135 3 .405 2.28-1.56 3.285-1.23 3.285-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"
                      />
                    </svg>
                    CODE
                  </a>
                  {% endif %} {% if project.links.demo %}
                  <a
                    href="{{ project.links.demo }}"
                    target="_blank"
                    class="prj-link"
                  >
                    <svg viewBox="0 0 24 24">
                      <path
                        d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42L17.59 5H14V3zM5 5h6V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6h-2v6H5V5z"
                      />
                    </svg>
                    LIVE
                  </a>
                  {% endif %}
                </div>

                <p
                  style="
                    color: var(--dim);
                    font-size: 0.9rem;
                    margin-bottom: 1.5rem;
                  "
                >
                  {{ project.description[lang] }}
                </p>

                <div
                  style="
                    display: flex;
                    flex-wrap: wrap;
                    gap: 0.5rem;
                    margin-top: auto;
                  "
                >
                  {% for t in project.stack %}
                  <span
                    style="
                      padding: 4px 8px;
                      border: 1px solid var(--border);
                      border-radius: 4px;
                      font-size: 0.75rem;
                      color: #ccc;
                      background: rgba(255, 255, 255, 0.05);
                    "
                    >{{ t }}</span
                  >
                  {% endfor %}
                </div>
              </div>

              {% if project.mermaid %}
              <div
                id="mermaid-source-{{ forloop.index }}"
                style="display: none"
              >
                {{ project.mermaid }}
              </div>

              <button
                class="arch-btn"
                onclick="openArchModal('mermaid-source-{{ forloop.index }}')"
              >
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M2 12h20M12 2v20" />
                </svg>
                {{ t_view_arch }}
              </button>
              {% endif %}
            </div>
            {% endfor %}
          </div>
        </section>
        {% endif %} {% if cv.education %}
        <section>
          <h2>{{ t_edu }} <span class="index">03</span></h2>
          {% for edu in cv.education %}
          <div class="xp-item" style="border-left: 2px solid var(--accent)">
            <div class="xp-header">
              <div class="xp-role">{{ edu.degree[lang] }}</div>
              <div class="xp-meta">{{ edu.institution }} / {{ edu.year }}</div>
            </div>
            <p style="color: #888; margin: 0">{{ edu.details[lang] }}</p>
          </div>
          {% endfor %}
        </section>
        {% endif %}

        <section>
          <h2>{{ t_lang }} & {{ t_int }} <span class="index">04</span></h2>

          {% if cv.languages %}
          <div style="margin-bottom: 2rem">
            <div
              style="
                color: #fff;
                font-weight: 700;
                margin-bottom: 1rem;
                border-radius: 2px;
                padding-bottom: 0.5rem;
              "
            >
              {{ t_lang }}
            </div>
            <div class="skill-grid">
              {% for lan in cv.languages %}
              <div
                class="skill-box"
                style="border-color: var(--accent); border-radius: 20px"
              >
                {{ lan.name[lang] }}
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %} {% if cv.interests %}
          <div
            style="
              color: #fff;
              font-weight: 700;
              margin-bottom: 1rem;
              margin-top: 2rem;
            "
          >
            {{ t_int }}
          </div>
          <div class="interest-grid">
            {% for int in cv.interests %}
            <div class="interest-item">
              <h3>{{ int.name[lang] }}</h3>
              <p>{{ int.description[lang] }}</p>
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </section>

        {% if cv.publications or cv.awards %}
        <section>
          <h2>Achievements <span class="index">05</span></h2>

          {% if cv.publications %}
          <div style="margin-bottom: 2rem">
            <div style="color: #fff; font-weight: 700; margin-bottom: 1rem">
              {{ t_pubs }}
            </div>
            {% for pub in cv.publications %}
            <div
              style="
                border-bottom: 1px solid var(--border);
                padding: 1rem 0;
                display: flex;
                justify-content: space-between;
              "
            >
              <span style="color: #ccc">{{ pub.title }}</span>
              <span style="color: #666; font-family: monospace"
                >{{ pub.year }}</span
              >
            </div>
            {% endfor %}
          </div>
          {% endif %} {% if cv.awards %}
          <div>
            <div style="color: #fff; font-weight: 700; margin-bottom: 1rem">
              {{ t_awards }}
            </div>
            {% for award in cv.awards %}
            <div
              style="
                border-bottom: 1px solid var(--border);
                padding: 1rem 0;
                display: flex;
                justify-content: space-between;
              "
            >
              <span style="color: #ccc">{{ award.name }}</span>
              <span style="color: #666; font-family: monospace"
                >{{ award.year }}</span
              >
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </section>
        {% endif %}
      </main>
    </div>

    <script>
      async function openArchModal(sourceId) {
        const modal = document.getElementById('archModal');
        const target = document.getElementById('mermaidTarget');
        const source = document.getElementById(sourceId).innerText;

        // Clear previous content
        target.innerHTML = '';

        // Create a new div for mermaid to render into
        const graphDiv = document.createElement('div');
        graphDiv.className = 'mermaid';
        graphDiv.textContent = source;
        target.appendChild(graphDiv);

        // Show modal
        modal.classList.add('active');

        // Run Mermaid
        try {
          await mermaid.run({nodes: [graphDiv]});
        } catch (e) {
          console.error('Mermaid render error:', e);
          graphDiv.textContent = 'Error rendering diagram.';
        }
      }

      function closeModal(e) {
        const modal = document.getElementById('archModal');
        modal.classList.remove('active');
      }
    </script>
  </body>
</html>
